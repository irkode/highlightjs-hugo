language = "en-us"

baseurl = "https://irkode.github.io/highlightjs-hugo"
title   = "Generate Highlight.js Javascript grammars for Go/Hugo templates"

#disableAliases = true
disableKinds = ['rss', 'sitemap', 'taxonomy', 'term']

[params]
  author     = "Irkode <irkode@rikode.de>"
  webroot    = "https://irkode.github.io/highlightjs-hugo"
  reporoot   = "https://github.com/irkode/"
  repository = "https://github.com/irkode/highlightjs-hugo"
  releases   = "https://github.com/irkode/highlightjs-hugo/releases/latest"
  blobs      = "https://github.com/irkode/highlightjs-hugo/blob/main"
  category   = "templates"
  license    = "MIT"
  licenseURL = "https://github.com/irkode/highlightjs-hugo/blob/main/LICENSE"

[permalinks]
  [permalinks.page]
    grammars = '/:contentbasename'
  [permalinks.section]
    grammars = '/'

# we generate yaml files containing keywords
[outputFormats.yaml]
  baseName       = "keywords"
  isHTML         = false
  isPlainText    = true
  mediaType      = "application/yaml"
  notAlternative = true

# we generate javascript files for the data structures needed by plugins
[outputFormats.js]
  baseName       = "hugo-keywords"
  isHTML         = false
  isPlainText    = true
  mediaType      = "text/javascript"
  notAlternative = true

[segments]
  [segments.grammars]
    [[segments.grammars.includes]]
      path = '{/grammars,/grammars/**}'
  [segments.discourse]
    [[segments.discourse.includes]]
      path = '{/discourse,/discourse/**}'
  [segments.dist]
    [[segments.dist.includes]]
      path = '{/dist,/dist/**}'

[module]
  # make sure we do not loose our own files when remounting stuff
  [[module.mounts]]
    source = 'assets'
    target = 'assets'
  [[module.mounts]]
    source = 'content'
    target = 'content'

  # mount results of Highlight.js build to assets
  [[module.mounts]]
    source = '../../work/highlight.js/extra/'
    target = 'assets/dist'
    files = ['hugo*/**']
  # import function part of the documentation
  [[module.mounts]]
    source = "../../hugoDocs/content/en/functions"
    target = "content/functions"
  # don't fail on missing shortcodes
  [[module.mounts]]
    source = 'layouts'
    target = 'layouts'
  [[module.mounts]]
    source = "../../hugoDocs/layouts/_shortcodes"
    target = "layouts/_shortcodes"

### all below is just for being able to scan hugoDocs for keywords without warnings
###
[[cascade]]
  # don't render/publish stuff in /functions imported from hugoDocs
  [cascade.build]
    list             = 'always'
    publishResources = false
    render           = 'never'
  [cascade.target]
    path = '{/functions,/functions/**}'
